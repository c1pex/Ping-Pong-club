# Используем официальный образ Node.js (v18)
FROM node:18

# Устанавливаем рабочую директорию внутри контейнера
WORKDIR /usr/src/app

# Копируем файлы манифеста зависимостей
COPY package*.json ./

# Устанавливаем зависимости
# Эта команда выполняется первой, чтобы использовать кэширование слоев Docker
RUN npm install

# Копируем весь остальной код проекта в контейнер
COPY . .

# Порт, который будет прослушивать наше Node.js приложение (должен совпадать с EXPOSE в docker-compose)
EXPOSE 3001

# Команда для запуска приложения (используем "start" или "dev" из package.json)
CMD ["npm", "run", "dev"]
